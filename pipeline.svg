<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4f46e5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cacheGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dockerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8fafc"/>
  
  <!-- Title -->
  <rect x="0" y="0" width="1200" height="60" fill="url(#headerGrad)"/>
  <text x="600" y="35" text-anchor="middle" fill="white" font-size="24" font-weight="bold" font-family="Arial, sans-serif">Program Repair API Interface Architecture</text>
  
  <!-- LLM Input -->
  <rect x="50" y="100" width="180" height="80" rx="10" fill="#e0e7ff" stroke="#4f46e5" stroke-width="2"/>
  <text x="140" y="125" text-anchor="middle" font-size="14" font-weight="bold" font-family="Arial, sans-serif">LLM Output</text>
  <text x="140" y="145" text-anchor="middle" font-size="12" font-family="Arial, sans-serif">Raw Patches</text>
  <text x="140" y="165" text-anchor="middle" font-size="12" font-family="Arial, sans-serif">Code</text>
  
  <!-- Primary API Endpoints -->
  <g id="extract-api">
    <rect x="300" y="80" width="200" height="120" rx="15" fill="url(#apiGrad)" stroke="#1e40af" stroke-width="2"/>
    <text x="400" y="105" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial, sans-serif">/extract_anchor_patch</text>
    <text x="400" y="125" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Extract patches from LLM</text>
    <text x="400" y="140" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Identify anchor points</text>
    <text x="400" y="155" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Integrate into source code</text>
    <text x="400" y="180" text-anchor="middle" fill="white" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Patch Extraction</text>
  </g>
  
  <g id="fix-api">
    <rect x="300" y="240" width="200" height="120" rx="15" fill="url(#apiGrad)" stroke="#1e40af" stroke-width="2"/>
    <text x="400" y="265" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial, sans-serif">/fix_with_patch</text>
    <text x="400" y="285" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Isolated patch verification</text>
    <text x="400" y="300" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Apply in Docker container</text>
    <text x="400" y="315" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">• Return Boolean + feedback</text>
    <text x="400" y="340" text-anchor="middle" fill="white" font-size="12" font-weight="bold" font-family="Arial, sans-serif">Patch Verification</text>
  </g>
  
  <!-- Docker Environment -->
  <rect x="580" y="160" width="180" height="120" rx="15" fill="url(#dockerGrad)" stroke="#d97706" stroke-width="2"/>
  <text x="670" y="185" text-anchor="middle" fill="white" font-size="16" font-weight="bold" font-family="Arial, sans-serif">Docker Container</text>
  <text x="670" y="205" text-anchor="middle" fill="white" font-size="12" font-family="Arial, sans-serif">Isolated Environment</text>
  <text x="670" y="225" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">All bugs co-exist</text>
  <text x="670" y="240" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">Patch verification</text>
  <text x="670" y="255" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">Build &amp; test execution</text>
  
  <!-- Caching Layer -->
  <g id="cache-layer">
    <rect x="820" y="120" width="160" height="80" rx="10" fill="url(#cacheGrad)" stroke="#059669" stroke-width="2"/>
    <text x="900" y="140" text-anchor="middle" fill="white" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Redis Web Cache</text>
    <text x="900" y="160" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">High-throughput</text>
    <text x="900" y="175" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">request management</text>
    
    <rect x="820" y="220" width="160" height="80" rx="10" fill="url(#cacheGrad)" stroke="#059669" stroke-width="2"/>
    <text x="900" y="240" text-anchor="middle" fill="white" font-size="14" font-weight="bold" font-family="Arial, sans-serif">C/C++ Builder Cache</text>
    <text x="900" y="260" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">Efficient build</text>
    <text x="900" y="275" text-anchor="middle" fill="white" font-size="11" font-family="Arial, sans-serif">optimization</text>
  </g>
  
  <!-- Additional Tools -->
  <g id="additional-tools">
    <rect x="50" y="420" width="180" height="80" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="140" y="440" text-anchor="middle" font-size="14" font-weight="bold" font-family="Arial, sans-serif">/reproduce</text>
    <text x="140" y="460" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">Reset &amp; reinitialize</text>
    <text x="140" y="475" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">verification environment</text>
    
    <rect x="280" y="420" width="180" height="120" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
    <text x="370" y="440" text-anchor="middle" font-size="14" font-weight="bold" font-family="Arial, sans-serif">/error_dig</text>
    <text x="370" y="460" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">Structured error analysis</text>
    <text x="370" y="475" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Classify failures</text>
    <text x="370" y="490" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Identify root causes</text>
    <text x="370" y="505" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Stack trace parsing</text>
    <text x="370" y="520" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• LLM-friendly output</text>
  </g>
  
  <!-- Output -->
  <rect x="950" y="400" width="180" height="100" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
  <text x="1040" y="420" text-anchor="middle" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Results</text>
  <text x="1040" y="440" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Boolean success status</text>
  <text x="1040" y="455" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Categorized feedback</text>
  <text x="1040" y="470" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Error classification</text>
  <text x="1040" y="485" text-anchor="middle" font-size="11" font-family="Arial, sans-serif">• Debug information</text>
  
  <!-- Arrows and Flow -->
  <!-- LLM to extract -->
  <path d="M 230 140 L 290 140" stroke="#4f46e5" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Extract to fix -->
  <path d="M 400 200 L 400 230" stroke="#1e40af" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Fix to Docker -->
  <path d="M 500 300 L 570 220" stroke="#1e40af" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Docker to Cache -->
  <path d="M 760 180 L 810 160" stroke="#d97706" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 760 220 L 810 250" stroke="#d97706" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- To additional tools -->
  <path d="M 300 360 L 140 410" stroke="#1e40af" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 400 360 L 370 410" stroke="#1e40af" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- To results -->
  <path d="M 760 220 L 940 450" stroke="#d97706" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 460 480 L 940 460" stroke="#f59e0b" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Key Features Box -->
  <rect x="50" y="560" width="1100" height="180" rx="15" fill="#f1f5f9" stroke="#64748b" stroke-width="2"/>
  <text x="600" y="585" text-anchor="middle" font-size="18" font-weight="bold" font-family="Arial, sans-serif">Key System Features</text>
  
  <!-- Features in organized columns -->
  <text x="80" y="615" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Scalability:</text>
  <text x="80" y="635" font-size="12" font-family="Arial, sans-serif">• Dual caching strategies for millions</text>
  <text x="80" y="650" font-size="12" font-family="Arial, sans-serif">  of concurrent requests</text>
  <text x="80" y="665" font-size="12" font-family="Arial, sans-serif">• Stateless HTTP and CLI interface</text>
  
  <text x="350" y="615" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Isolation:</text>
  <text x="350" y="635" font-size="12" font-family="Arial, sans-serif">• Docker-based verification</text>
  <text x="350" y="650" font-size="12" font-family="Arial, sans-serif">  environments</text>
  <text x="350" y="665" font-size="12" font-family="Arial, sans-serif">• All bugs co-exist in single container</text>
  
  <text x="620" y="615" font-size="14" font-weight="bold" font-family="Arial, sans-serif">LLM Integration:</text>
  <text x="620" y="635" font-size="12" font-family="Arial, sans-serif">• Compatible with LLM-generated</text>
  <text x="620" y="650" font-size="12" font-family="Arial, sans-serif">  responses</text>
  <text x="620" y="665" font-size="12" font-family="Arial, sans-serif">• Context-length optimized output</text>
  
  <text x="80" y="700" font-size="14" font-weight="bold" font-family="Arial, sans-serif">Research Support:</text>
  <text x="80" y="720" font-size="12" font-family="Arial, sans-serif">• Program repair and vulnerability detection • Large-scale automated evaluation</text>  
  <text x="80" y="735" font-size="12" font-family="Arial, sans-serif">• Comprehensive debugging tools</text>
</svg>
